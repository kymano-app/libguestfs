--- Makefile.in	2022-01-24 23:37:00.000000000 +0100
+++ Makefile.in_new	2022-01-25 20:38:02.000000000 +0100
@@ -128,7 +128,6 @@
 
 # Must be the first tests that run.
 @ENABLE_APPLIANCE_TRUE@am__append_1 = tests/qemu
-@ENABLE_GNULIB_TESTS_TRUE@am__append_2 = gnulib/tests
 @ENABLE_DAEMON_TRUE@am__append_3 = daemon tests/daemon
 
 # Tests - order is important.
@@ -147,20 +146,6 @@
 @ENABLE_APPLIANCE_TRUE@	tests/relative-paths tests/gdisk \
 @ENABLE_APPLIANCE_TRUE@	tests/regressions tests/tsk tests/yara
 
-# Language bindings.
-@HAVE_PERL_TRUE@am__append_5 = perl perl/examples
-@HAVE_OCAML_TRUE@am__append_6 = ocaml ocaml/examples
-@HAVE_PYTHON_TRUE@am__append_7 = python python/examples
-@HAVE_RUBY_TRUE@am__append_8 = ruby ruby/examples
-@HAVE_JAVA_TRUE@am__append_9 = java java/examples
-@HAVE_HASKELL_TRUE@am__append_10 = haskell
-@HAVE_PHP_TRUE@am__append_11 = php
-@HAVE_ERLANG_TRUE@am__append_12 = erlang erlang/examples
-@HAVE_LUA_TRUE@am__append_13 = lua lua/examples
-@HAVE_GOBJECT_TRUE@am__append_14 = gobject
-@HAVE_GOLANG_TRUE@am__append_15 = golang golang/examples
-@HAVE_RUST_TRUE@am__append_16 = rust
-
 # OCaml tools.  Note 'common/ml*' and 'customize' contain shared code
 # used by other OCaml tools, so these must come first.
 @HAVE_OCAML_TRUE@am__append_17 = common/mlgettext common/mlprogress \
@@ -621,29 +606,20 @@
 TEST_LOG_DRIVER = $(SHELL) $(top_srcdir)/build-aux/test-driver
 TEST_LOG_COMPILE = $(TEST_LOG_COMPILER) $(AM_TEST_LOG_FLAGS) \
 	$(TEST_LOG_FLAGS)
-DIST_SUBDIRS = common/mlstdutils generator tests/qemu test-data \
-	gnulib/lib gnulib/tests common/errnostring common/protocol \
-	common/qemuopts common/utils common/structs include lib docs \
-	examples common/mlutils bundled/ocaml-augeas common/mlpcre \
-	daemon tests/daemon appliance tests/c-api tests/tmpdirs \
-	tests/protocol tests/events tests/parallel tests/create \
-	tests/disks tests/discard tests/mountable tests/network \
-	tests/lvm tests/luks tests/md tests/selinux tests/relabel \
-	tests/ntfs tests/btrfs tests/xfs tests/charsets tests/xml \
-	tests/mount-local tests/9p tests/rsync tests/bigdirs \
-	tests/disk-labels tests/hotplug tests/nbd tests/http \
-	tests/syslinux tests/journal tests/relative-paths tests/gdisk \
-	tests/regressions tests/tsk tests/yara common/edit \
+DIST_SUBDIRS = common/mlstdutils generator tests/qemu \
+	gnulib/lib common/errnostring common/protocol \
+	common/qemuopts common/utils common/structs include lib \
+	common/mlutils bundled/ocaml-augeas common/mlpcre \
+	appliance \
+	common/edit \
 	common/options common/parallel common/progress common/visit \
-	common/windows test-tool fish align cat diff df edit format \
-	inspector make-fs rescue bash perl perl/examples ocaml \
-	ocaml/examples python python/examples ruby ruby/examples java \
-	java/examples haskell php erlang erlang/examples lua \
-	lua/examples gobject golang golang/examples rust csharp \
+	common/windows fish align cat diff df edit format \
+	inspector make-fs rescue bash  \
+	csharp \
 	common/mlgettext common/mlprogress common/mlvisit common/mlxml \
 	common/mltools common/mlcustomize customize builder \
 	builder/templates get-kernel resize sparsify sysprep dib tools \
-	fuse po po-docs
+	fuse
 am__DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/config.h.in \
 	$(srcdir)/config.sh.in $(srcdir)/installcheck.sh.in \
 	$(srcdir)/ocaml-dep.sh.in $(srcdir)/ocaml-link.sh.in \
@@ -1573,9 +1549,6 @@
 HAVE_XLOCALE_H = @HAVE_XLOCALE_H@
 HAVE__BOOL = @HAVE__BOOL@
 HAVE__EXIT = @HAVE__EXIT@
-HIVEX_CFLAGS = @HIVEX_CFLAGS@
-HIVEX_LIBS = @HIVEX_LIBS@
-HIVEX_OPEN_UNSAFE_FLAG = @HIVEX_OPEN_UNSAFE_FLAG@
 INCLUDE_DIRECTORY = @INCLUDE_DIRECTORY@
 INCLUDE_NEXT = @INCLUDE_NEXT@
 INCLUDE_NEXT_AS_FIRST_DIRECTIVE = @INCLUDE_NEXT_AS_FIRST_DIRECTIVE@
@@ -1787,7 +1760,6 @@
 OCAML_FLAGS = @OCAML_FLAGS@
 OCAML_GETTEXT = @OCAML_GETTEXT@
 OCAML_PKG_gettext = @OCAML_PKG_gettext@
-OCAML_PKG_hivex = @OCAML_PKG_hivex@
 OCAML_PKG_oUnit = @OCAML_PKG_oUnit@
 OCAML_RUNTIME_VARIANT_PIC_OPTION = @OCAML_RUNTIME_VARIANT_PIC_OPTION@
 OCAML_WARN_ERROR = @OCAML_WARN_ERROR@
@@ -2274,13 +2246,13 @@
 # Unconditional because nothing is built yet.
 
 # After all source files were used we can generate the translation strings
-SUBDIRS = common/mlstdutils generator $(am__append_1) test-data \
+SUBDIRS = common/mlstdutils generator $(am__append_1) \
 	gnulib/lib $(am__append_2) common/errnostring common/protocol \
-	common/qemuopts common/utils common/structs include lib docs \
-	examples common/mlutils bundled/ocaml-augeas common/mlpcre \
+	common/qemuopts common/utils common/structs include lib \
+	common/mlutils bundled/ocaml-augeas common/mlpcre \
 	$(am__append_3) $(am__append_4) common/edit common/options \
 	common/parallel common/progress common/visit common/windows \
-	test-tool fish align cat diff df edit format inspector make-fs \
+	fish align cat diff df edit format inspector make-fs \
 	rescue bash $(am__append_5) $(am__append_6) $(am__append_7) \
 	$(am__append_8) $(am__append_9) $(am__append_10) \
 	$(am__append_11) $(am__append_12) $(am__append_13) \
@@ -3125,7 +3097,7 @@
 docs/C_SOURCE_FILES: configure.ac
 	rm -f $@ $@-t
 	find $(DIST_SUBDIRS) -name '*.[ch]' | \
-	grep -v -E '^(builder/index-parse\.|builder/index-scan\.|examples/|gnulib/|gobject/|java/com_redhat_et_libguestfs|perl/|php/extension/config\.h|ruby/ext/guestfs/extconf\.h|tests/|test-data/|bundled/)' | \
+	grep -v -E '^(builder/index-parse\.|builder/index-scan\./|gnulib/|gobject/|java/com_redhat_et_libguestfs|perl/|php/extension/config\.h|ruby/ext/guestfs/extconf\.h|bundled/)' | \
 	grep -v -E '/(guestfs|rc)_protocol\.' | \
 	grep -v -E '.*/errnostring\.' | \
 	grep -v -E '.*-gperf\.' | \
@@ -3138,11 +3110,11 @@
 	rm -f $@ $@-t
 	cd $(srcdir); \
 	find $(DIST_SUBDIRS) -name '*.c' | \
-	grep -v -E '^(examples|gnulib|perl/(blib|examples)|po-docs|tests|test-data|bundled)/' | \
+	grep -v -E '^(gnulib/(blib)|bundled)/' | \
 	grep -v -E '/((guestfs|rc)_protocol\.c|dummy\.c)$$' | \
 	grep -v -E '^python/utils\.c$$' | \
 	grep -v -E '^perl/lib/Sys/Guestfs\.c$$' | \
-	grep -v -E '.*-(tests|gperf)\.c$$' | \
+	grep -v -E '.*-(gperf)\.c$$' | \
 	LC_ALL=C sort -u > $@-t
 	mv $@-t $@
 
