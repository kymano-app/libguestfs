39,40d38
< #include <sys/socket.h>
< #include <sys/un.h>
51a50,52
> #include "winsock2.h"
> #include "afunix.h"
> 
419,421c420,422
<     data->qemu_data = guestfs_int_test_qemu (g);
<     if (data->qemu_data == NULL)
<       goto cleanup0;
---
>     //data->qemu_data = guestfs_int_test_qemu (g);
>     //if (data->qemu_data == NULL)
>     //  goto cleanup0;
459a461,462
>   debug (g, "create socket");
> 
466a470,479
>   debug (g, "start socket");
> 
>   int Result = 0;
>   WSADATA WsaData = { 0 };
>   Result = WSAStartup(MAKEWORD(2, 2), &WsaData);
>   if (Result != 0) {
>       printf("WSAStartup failed with error: %d\n", Result);
>       goto cleanup0;
>   }
> 
476a490,491
>   debug (g, "binding");
> 
489c504
<     if (socketpair (AF_LOCAL, SOCK_STREAM|SOCK_CLOEXEC, 0, sv) == -1) {
---
>     if (socketpair (CF_LOCALE, SOCK_STREAM|SOCK_CLOEXEC, 0, sv) == -1) {
