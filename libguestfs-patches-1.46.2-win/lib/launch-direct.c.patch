24a25,28
> #ifndef FD_SETSIZE
> #define FD_SETSIZE      1024
> #endif
> 
39,40d42
< #include <sys/socket.h>
< #include <sys/un.h>
51a54,56
> #include "winsock2.h"
> #include "afunix.h"
> 
415c420
<   debug (g, "begin testing qemu features");
---
>   debug (g, "begin testing qemu features : %d", FD_SETSIZE);
417a423
>   /*
429a436
>   */
432,439c439,440
<   has_kvm = guestfs_int_platform_has_kvm (g, data->qemu_data);
<   debug (g, "qemu KVM: %s", has_kvm ? "enabled" : "disabled");
< 
<   force_tcg = guestfs_int_get_backend_setting_bool (g, "force_tcg");
<   if (force_tcg == -1)
<     return -1;
<   else if (force_tcg)
<     accel_val = "tcg";
---
>   // has_kvm = guestfs_int_platform_has_kvm (g, data->qemu_data);
>   // debug (g, "qemu KVM: %s", has_kvm ? "enabled" : "disabled");
440a442,448
>   //force_tcg = guestfs_int_get_backend_setting_bool (g, "force_tcg");
>   //if (force_tcg == -1)
>   //  return -1;
>   //else if (force_tcg)
>   //  accel_val = "tcg";
>   
>   /*
458a467,469
>   */
> 
>   debug (g, "create socket");
466a478,487
>   debug (g, "start socket");
> 
>   int Result = 0;
>   WSADATA WsaData = { 0 };
>   Result = WSAStartup(MAKEWORD(2, 2), &WsaData);
>   if (Result != 0) {
>       printf("WSAStartup failed with error: %d\n", Result);
>       goto cleanup0;
>   }
> 
476a498,499
>   debug (g, "binding");
> 
489c512
<     if (socketpair (AF_LOCAL, SOCK_STREAM|SOCK_CLOEXEC, 0, sv) == -1) {
---
>     if (socketpair (CF_LOCALE, SOCK_STREAM|SOCK_CLOEXEC, 0, sv) == -1) {
